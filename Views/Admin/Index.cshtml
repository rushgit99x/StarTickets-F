@model StarTickets.Models.ViewModels.AdminDashboardViewModel
@{
    ViewData["Title"] = "StarTickets - Admin Dashboard";
    Layout = "~/Views/Shared/CustomLayouts/_AdminDashboard.cshtml";
}

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <div class="logo">
            <i class="fas fa-star"></i>
        </div>
        <div class="brand">StarTickets</div>
    </div>

    <nav class="sidebar-menu">
        <div class="menu-item">
            <a href="#" class="menu-link active" data-page="dashboard">
                <i class="fas fa-tachometer-alt menu-icon"></i>
                <span class="menu-text">Dashboard</span>
            </a>
        </div>

        <div class="menu-item">
            <a href="@Url.Action("Index", "UserManagement")" class="menu-link external-link">
                <i class="fas fa-users menu-icon"></i>
                <span class="menu-text">User Management</span>
                @* <span class="menu-badge">23</span> *@
            </a>
        </div>

        @* <div class="menu-item">
            <a href="#" class="menu-link" data-page="organizers">
                <i class="fas fa-user-tie menu-icon"></i>
                <span class="menu-text">Event Organizers</span>
                <span class="menu-badge">8</span>
            </a>
        </div> *@

        <div class="menu-item">
            @* <a href="#" class="menu-link" data-page="events"> *@
                <a href="@Url.Action("Index", "EventManagement")" class="menu-link external-link">
                <i class="fas fa-calendar-alt menu-icon"></i>
                <span class="menu-text">Events</span>
            </a>
        </div>

        <div class="menu-item">
            @* <a href="#" class="menu-link" data-page="categories"> *@
            <a href="@Url.Action("Index", "CategoryManagement")" class="menu-link external-link">
                <i class="fas fa-layer-group menu-icon"></i>
                <span class="menu-text">Categories</span>
            </a>
        </div>

        <div class="menu-item">
            @* <a href="#" class="menu-link" data-page="venues"> *@
            <a href="@Url.Action("Index", "VenueManagement")" class="menu-link external-link">
                <i class="fas fa-building menu-icon"></i>
                <span class="menu-text">Venues</span>
            </a>
        </div>

        <div class="menu-item">
            <a href="@Url.Action("Index", "BookingManagement")" class="menu-link external-link">
                <i class="fas fa-ticket-alt menu-icon"></i>
                <span class="menu-text">Bookings</span>
            </a>
        </div>

        <div class="menu-item">
            <a href="@Url.Action("Index", "PaymentManagement")" class="menu-link external-link">
                <i class="fas fa-credit-card menu-icon"></i>
                <span class="menu-text">Payments</span>
            </a>
        </div>

        @* <div class="menu-item">
            <a href="#" class="menu-link" data-page="refunds">
                <i class="fas fa-undo-alt menu-icon"></i>
                <span class="menu-text">Refunds</span>
                <span class="menu-badge">3</span>
            </a>
        </div> *@

        <div class="menu-item">
            <a href="@Url.Action("Index", "Reports")" class="menu-link external-link">
                <i class="fas fa-chart-bar menu-icon"></i>
                <span class="menu-text">Reports & Analytics</span>
            </a>
        </div>

        @* <div class="menu-item">
            <a href="#" class="menu-link" data-page="promotions">
                <i class="fas fa-tags menu-icon"></i>
                <span class="menu-text">Promotions</span>
            </a>
        </div> *@

        @* <div class="menu-item">
            <a href="#" class="menu-link" data-page="marketing">
                <i class="fas fa-bullhorn menu-icon"></i>
                <span class="menu-text">Marketing</span>
            </a>
        </div> *@

        @* <div class="menu-item">
            <a href="#" class="menu-link" data-page="notifications">
                <i class="fas fa-bell menu-icon"></i>
                <span class="menu-text">Notifications</span>
                <span class="menu-badge">5</span>
            </a>
        </div> *@

        <div class="menu-item">
            <a href="@Url.Action("Index", "ReviewsManagement")" class="menu-link external-link">
                <i class="fas fa-star-half-alt menu-icon"></i>
                <span class="menu-text">Reviews & Ratings</span>
            </a>
        </div>

        @* <div class="menu-item">
            <a href="#" class="menu-link" data-page="support">
                <i class="fas fa-headset menu-icon"></i>
                <span class="menu-text">Customer Support</span>
                <span class="menu-badge">7</span>
            </a>
        </div> *@

        @* <div class="menu-item">
            <a href="#" class="menu-link" data-page="security">
                <i class="fas fa-shield-alt menu-icon"></i>
                <span class="menu-text">Security</span>
            </a>
        </div> *@

        @* <div class="menu-item">
            <a href="#" class="menu-link" data-page="backups">
                <i class="fas fa-database menu-icon"></i>
                <span class="menu-text">Backups</span>
            </a>
        </div> *@

        @* <div class="menu-item">
            <a href="#" class="menu-link" data-page="logs">
                <i class="fas fa-list-alt menu-icon"></i>
                <span class="menu-text">System Logs</span>
            </a>
        </div> *@

        @* <div class="menu-item">
            <a href="#" class="menu-link" data-page="settings">
                <i class="fas fa-cog menu-icon"></i>
                <span class="menu-text">Settings</span>
            </a>
        </div> *@

        <div class="menu-item">
            <a href="@Url.Action("Logout", "Auth")" class="menu-link external-link" data-page="logout">
                <i class="fas fa-sign-out-alt menu-icon"></i>
                <span class="menu-text">Logout</span>
            </a>
        </div>
    </nav>
</div>

<!-- Main Content -->
<div class="main-content" id="mainContent">
    <!-- Top Bar -->
    <div class="topbar">
        <button class="sidebar-toggle" id="sidebarToggle">
            <i class="fas fa-bars"></i>
        </button>

        <div class="topbar-right">
            <div class="user-menu">
                <div class="user-avatar">@Model.AdminInitials</div>
                <div>
                    <div style="font-weight: 600; font-size: 14px;">@Model.AdminFullName</div>
                    <div style="font-size: 12px; color: #6b7280;">@Model.AdminEmail</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Area -->
    <div class="content-area">
        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page-content">
            <h1 class="page-title">
                <i class="fas fa-tachometer-alt"></i>
                Dashboard Overview
            </h1>
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stats-card primary">
                    <div class="stats-header">
                        <div>
                            <div class="stats-value" data-target="@Model.TotalUsers">0</div>
                            <div class="stats-label">Total Users</div>
                            <div class="stats-change positive">
                                <i class="fas fa-arrow-up"></i> +12% from last month
                            </div>
                        </div>
                        <div class="stats-icon primary">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                </div>

                <div class="stats-card success">
                    <div class="stats-header">
                        <div>
                            <div class="stats-value" data-target="@Model.ActiveEvents">0</div>
                            <div class="stats-label">Active Events</div>
                            <div class="stats-change positive">
                                <i class="fas fa-arrow-up"></i> +5 this week
                            </div>
                        </div>
                        <div class="stats-icon success">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                    </div>
                </div>

                <div class="stats-card warning">
                    <div class="stats-header">
                        <div>
                            <div class="stats-value" data-target="@Model.TicketsSold">0</div>
                            <div class="stats-label">Tickets Sold</div>
                            <div class="stats-change positive">
                                <i class="fas fa-arrow-up"></i> +28% from last month
                            </div>
                        </div>
                        <div class="stats-icon warning">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                    </div>
                </div>

                <div class="stats-card info">
                    <div class="stats-header">
                        <div>
                            <div class="stats-value" data-target="@Model.TotalRevenue">$0</div>
                            <div class="stats-label">Total Revenue</div>
                            <div class="stats-change positive">
                                <i class="fas fa-arrow-up"></i> +18% from last month
                            </div>
                        </div>
                        <div class="stats-icon info">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts and Tables Row -->
            <div class="row">
                <div class="col-lg-14">
                    <!-- Revenue Chart -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-chart-line"></i>
                                Revenue Analytics
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="revenueChart"
                                        data-labels='@System.Text.Json.JsonSerializer.Serialize(Model.MonthlyLabels)'
                                        data-values='@System.Text.Json.JsonSerializer.Serialize(Model.MonthlyRevenue)'></canvas>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Recent Events Table -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-calendar-alt"></i>
                        Recent Events
                    </h3>
                    <a href="#" class="quick-action-btn">View All Events</a>
                </div>
                <div class="card-body">
                    <div class="table-wrapper">
                        <table class="custom-table">
                            <thead>
                                <tr>
                                    <th>Event Name</th>
                                    <th>Organizer</th>
                                    <th>Date & Time</th>
                                    <th>Venue</th>
                                    <th>Tickets Sold</th>
                                    <th>Revenue</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var e in Model.RecentEvents)
                                {
                                    <tr>
                                        <td>
                                            <div class="fw-bold">@e.EventName</div>
                                        </td>
                                        <td>@e.OrganizerName</td>
                                        <td>
                                            <div>@e.EventDate.ToString("MMM d, yyyy")</div>
                                            <small class="text-muted">@e.EventDate.ToString("h:mm tt")</small>
                                        </td>
                                        <td>@e.VenueName</td>
                                        <td>
                                            <div>@e.TicketsSold.ToString("N0")</div>
                                        </td>
                                        <td class="fw-bold text-success">@e.Revenue.ToString("C0")</td>
                                        <td>
                                            <span class="status-badge @(e.Status=="Published"?"status-active": e.Status=="Cancelled"?"status-cancelled":"status-pending")">@e.Status</span>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <a class="btn-action btn-view" href="@Url.Action("Index","EventManagement")"><i class="fas fa-eye"></i></a>
                                                <a class="btn-action btn-edit" href="@Url.Action("Index","EventManagement")"><i class="fas fa-edit"></i></a>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>  
    </div>
</div>